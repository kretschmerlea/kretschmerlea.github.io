define(["require","exports","tslib","external/prop-types","react","modules/clean/auth/login_or_register/types","modules/clean/react/file_viewer/file_viewer","modules/clean/open_in_app/actions","modules/clean/sharing/async_share_modal_util","modules/clean/viewer","modules/clean/react/file_viewer/data/store","modules/clean/web_timing_logger","modules/constants/file_viewer","modules/clean/react/extensions/data/store","modules/clean/integrations/zoom_share_dialog/async_modal"],function(e,t,i,r,n,o,a,s,l,d,u,c,_,m,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r=i.__importDefault(r),n=i.__importDefault(n);var h=(function(t){function h(e){var i=t.call(this,e)||this,r=d.Viewer.get_viewer(),n=e.userId?r.get_user_by_id(e.userId):r.work_user||r.personal_user;i.state={user:n},c.log_js_modules_application_code_start();var o=e.file,a=u.getStoreForFileViewer();return u.hydrateFileViewerNamespace(a,{file:o}),n&&m.initializeStore(n,[o]),i}return i.__extends(h,t),h.prototype.componentDidMount=function(){var t=this,r=this.props,a=r.shareEmail,d=r.file;if(a&&this.state.user)new Promise(function(t,i){e(["modules/clean/react/browse/models"],t,i)}).then(i.__importStar).then(function(e){var i=e.File;l.asyncShowPrefilledShareModal({user:t.state.user,sharePrefillEmail:a,content:new i(t.props.file)})});else if(_.SHARED_LINK_REACT_AUTH_MODAL&&this.props.authModalKind===o.LoginOrRegisterKind.IMMEDIATE&&!this.state.user){var u=function(){return i.__awaiter(t,void 0,void 0,function(){var t,r,a;return i.__generator(this,function(s){switch(s.label){case 0:return[4,Promise.all([new Promise(function(t,i){e(["modules/clean/react/modal"],t,i)}).then(i.__importStar),new Promise(function(t,i){e(["modules/clean/auth/login_or_register/modal"],t,i)}).then(i.__importStar)])];case 1:return t=s.sent(),r=t[0].Modal,a=t[1].LoginOrRegisterModal,r.showInstance(n.default.createElement(a,{downloadAction:null,id:"shared-link-immediate-signup-modal",initialMode:o.Mode.REGISTER,kind:o.LoginOrRegisterKind.IMMEDIATE,onAuthenticateSuccess:function(){},onCancel:function(){},signup_tag:"shmodel_modal_register"})),[2]}})})};u()}else this.props.presentInZoom&&this.state.user&&p.asyncShowModal(this.state.user.id,d.file_id,"file-viewer-modal-overlay","desktop");if(this.props.openImmediatelyInApp){var c=this.props.file;s.openImmediately(c.open_in_app_data)}},h.prototype.render=function(){var e=this.props,t=e.fileViewerProps,r=e.onCloseUrl,o=e.isEmbedded,s=e.sharedLinkInfo,l=e.shareToken,d=e.sharePermission,u=n.default.createElement(a.FileViewer,i.__assign({},t,{fileCount:1,fileIndex:0,titleBarCloseUrl:r,sharedLinkInfo:s,shareToken:l,sharePermission:d,user:this.state.user,transparentBackground:!0}));return o?n.default.createElement("div",{className:"embedded"},u):u},h.prototype.getChildContext=function(){return{authModalKind:this.props.authModalKind}},h.childContextTypes={authModalKind:r.default.oneOf(["download","immediate",null])},h})(n.default.Component);t.FileViewerContainer=h});
//# sourceMappingURL=container.min.js-vfl5TyeTm.map