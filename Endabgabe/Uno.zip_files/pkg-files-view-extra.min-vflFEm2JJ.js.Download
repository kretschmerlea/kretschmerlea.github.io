define("modules/clean/react/browse/util",["require","exports","modules/clean/react/browse/models","modules/clean/react/browse/sort_helpers","modules/clean/react/files_view/types","modules/core/exception","modules/core/i18n"],function(e,t,o,r,i,l,n){"use strict";function a(e,t){var r=e.count(),i=n._("You only have partial access");return r>0?1!==r||o.File.canViewFileMembers(e.first(),t)?n.ungettext("%(count)d item selected","%(count)d items selected",r).format({count:r}):o.File.isNoAccessSharedFolder(e.first())?n._("You don’t have access to this folder"):i:t&&!t.canViewContainingNSMembers?i:""}function s(e,t,o,r){var i=t.sortField,n=t.sortDirection,a=d(i,o),s=c(i,n,r);return a&&s?e.sortBy(a,s):(l.reportException({err:new Error("sortFiles was called with an unsupported sort field"),tags:["browse_sort_invalid_field"],severity:l.SEVERITY.CRITICAL,exc_extra:{sort_field:i}}),e)}function d(e,t){switch(e){case i.SortField.FILENAME:case i.SortField.SHARED_WITH:return function(e){return u(e,o.File.getFilename(e))};case i.SortField.MODIFIED:return function(e){return u(e,e.ts)};case i.SortField.CATEGORY:return function(e){return u(e,o.File.getCategoryDescription(e))};case i.SortField.EXTENSION:return function(e){return u(e,o.File.getExtension(e))};case i.SortField.SIZE:return function(e){return u(e,e.is_dir&&t.has(e.fq_path)?t.get(e.fq_path).size:e.bytes)};default:return}}function c(e,t,o){var r=n.case_insensitive_comparator(!0),l=t===i.SortDirection.ASCENDING?1:-1,a=o?p(l,r):f(l,r);switch(e){case i.SortField.FILENAME:case i.SortField.SHARED_WITH:case i.SortField.SIZE:return a;case i.SortField.MODIFIED:case i.SortField.CATEGORY:case i.SortField.EXTENSION:return m(l,r);default:return}}function u(e,t){return{isFolder:e.is_dir,value:t,isTMF:o.File.isTeamMemberFolder(e)}}function p(e,t){return function(o,i){var l=o.value,n=o.isTMF,a=i.value;return h(n,i.isTMF)||r.compare(l,a,e,t)}}function f(e,t){return function(o,i){var l=o.isFolder,n=o.value,a=o.isTMF,s=i.isFolder,d=i.value,c=i.isTMF,u=h(a,c);return u?u:(n||(n=1/0*e),d||(d=1/0*e),l&&s?r.compare(n,d,e,t):l?-e:s?e:r.compare(n,d,e,t))}}function m(e,t){return function(o,i){var l=o.isFolder,n=o.value,a=o.isTMF,s=i.isFolder,d=i.value,c=i.isTMF,u=h(a,c);return u?u:l&&s?r.compare(n,d,e,t):l?1:s?-1:""===n?1:""===d?-1:r.compare(n,d,e,t)}}function h(e,t){return e?-1:t?1:0}Object.defineProperty(t,"__esModule",{value:!0}),t.getSelectedFilesText=a,t.sortFiles=s});var __importStar=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t};define("modules/clean/react/file_viewer/async_controller",["require","exports"],function(e,t){"use strict";function o(){Array.from(document.querySelectorAll(l)).forEach(function(e){e.style.display&&e.setAttribute("data-preview-old-display",e.style.display),e.style.display="none"})}function r(){Array.from(document.querySelectorAll(l)).forEach(function(e){e.style.display=e.hasAttribute("data-preview-old-display")?e.getAttribute("data-preview-old-display"):""})}function i(t){var o=t.containerId,r=t.files,i=t.fileViewAction,l=t.fileViewOrigin,n=t.fileViewTarget,a=t.indexOfPreviewFile,s=t.onFileViewerDidMount,d=t.onFileViewerUnmount,c=(t.shouldFocusComment,t.shouldPresentInZoom),u=void 0!==c&&c,p=t.updateBrowserLocation,f=void 0===p||p,m=t.user;new Promise(function(t,o){e(["modules/clean/react/file_viewer/controller"],t,o)}).then(__importStar).then(function(e){e.open(r,a,m,o,{fileViewTarget:n,fileViewOrigin:l,fileViewAction:i,disableRouting:!f,onComponentDidMount:s,onComponentWillUnmount:d,shouldPresentInZoom:u})})}Object.defineProperty(t,"__esModule",{value:!0});var l=[".maestro-chrome","#maestro-nav","#page-footer","#page-content","#page-header","#page-sidebar","#browse-box","#flash-upload-container","#maestro-header",".snackbar-container"].join();t.hideElementsBehindFileViewer=o,t.showElementsBehindFileViewer=r,t.asyncOpenPreview=i}),define("modules/clean/react/files_view/constants",["require","exports","modules/clean/react/files_view/types","modules/core/i18n"],function(e,t,o,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,l,n,a;t.DEFAULT_COLUMN_HEADER_HEIGHT=40,t.DEFAULT_ROW_HEIGHT=72,t.DEFAULT_ROW_HEIGHT_WITH_SNIPPETS=120,t.COMPACT_COLUMN_HEADER_HEIGHT=48,t.PINNED_TEAM_FOLDER_SECONDARY_HEADER_PADDING_TOP=12,t.CHECKBOX_CELL_FLEX="0 0 36px",t.FILE_NAME_TOOLTIP_MAX_LINE_LENGTH=65,t.LIST_VIEW_COLUMN_FLEX={3:[t.CHECKBOX_CELL_FLEX,"1 1 50%","0 0 25%","0 0 25%"],2:[t.CHECKBOX_CELL_FLEX,"1 1 60%","0 0 40%"],1:[t.CHECKBOX_CELL_FLEX,"1 1 100%"]},t.LIST_VIEW_SEARCH_MODE_COLUMN_FLEX={3:[t.CHECKBOX_CELL_FLEX,"1 1 50%","0 0 25%","0 0 25%"],2:[t.CHECKBOX_CELL_FLEX,"1 1 60%","0 0 40%"],1:[t.CHECKBOX_CELL_FLEX,"1 1 100%"]},t.LIST_VIEW_SEARCH_MODE_WITH_SNIPPETS_COLUMN_FLEX={3:[t.CHECKBOX_CELL_FLEX,"1 1 50%","0 0 25%","0 0 25%"],2:[t.CHECKBOX_CELL_FLEX,"1 1 65%","0 0 35%"],1:[t.CHECKBOX_CELL_FLEX,"1 1 100%"]},t.GRID_VIEW_COLUMN_FLEX=[t.CHECKBOX_CELL_FLEX,"1 1"],t.LIST_VIEW_COLUMNS=[{sortField:o.SortField.FILENAME,label:r._("Name"),popoverTriggerLabel:r._("Name"),isLocked:!0},{sortField:o.SortField.MODIFIED,label:r._("Modified"),popoverTriggerLabel:r._("Modified")},{sortField:o.SortField.SHARED_WITH,label:r._("Members"),popoverTriggerLabel:r._("Members"),isSortOrderOptionDisabled:!0},{sortField:o.SortField.CATEGORY,label:r._("Type"),popoverTriggerLabel:r._("Type")},{sortField:o.SortField.EXTENSION,label:r._("Extension"),popoverTriggerLabel:r._("Extension")},{sortField:o.SortField.SIZE,label:r._("Size"),popoverTriggerLabel:r._("Size")}],t.GRID_VIEW_COLUMNS=[{sortField:o.SortField.FILENAME,label:r._("Name"),popoverTriggerLabel:r._("Name")},{sortField:o.SortField.MODIFIED,label:r._("Modified"),popoverTriggerLabel:r._("Modified")},{sortField:o.SortField.CATEGORY,label:r._("Type"),popoverTriggerLabel:r._("Type")},{sortField:o.SortField.EXTENSION,label:r._("Extension"),popoverTriggerLabel:r._("Extension")},{sortField:o.SortField.SIZE,label:r._("Size"),popoverTriggerLabel:r._("Size")}],t.SEARCH_LIST_VIEW_COLUMNS=[{sortField:o.SortField.FILENAME,label:r._("Name"),popoverTriggerLabel:r._("Name"),isLocked:!0,isSortDisabled:!0},{sortField:o.SortField.MODIFIED,label:r._("Modified"),popoverTriggerLabel:r._("Modified"),isLocked:!0,isSortDisabled:!0},{sortField:o.SortField.SIZE,label:r._("Size"),popoverTriggerLabel:r._("Size"),isLocked:!0,isSortDisabled:!0}],t.SEARCH_LIST_VIEW_SORT_ENABLED_COLUMNS=[{sortField:o.SortField.FILENAME,label:r._("Name"),popoverTriggerLabel:r._("Name"),isLocked:!0,isSortDisabled:!0},{sortField:o.SortField.RELEVANCE,label:r._("Relevance"),popoverTriggerLabel:r._("Relevance"),isLocked:!1,isSortDisabled:!1},{sortField:o.SortField.SIZE,label:r._("Size"),popoverTriggerLabel:r._("Size"),isLocked:!0,isSortDisabled:!0},{sortField:o.SortField.MODIFIED,label:r._("Last modified"),popoverTriggerLabel:r._("Last modified"),isLocked:!1,isSortDisabled:!1}],t.SEARCH_GRID_VIEW_SORT_ENABLED_COLUMNS=[{sortField:o.SortField.RELEVANCE,label:r._("Relevance"),popoverTriggerLabel:r._("Relevance"),isLocked:!1,isSortDisabled:!1},{sortField:o.SortField.MODIFIED,label:r._("Last modified"),popoverTriggerLabel:r._("Last modified"),isLocked:!1,isSortDisabled:!1}],t.SEARCH_LIST_VIEW_COLUMNS_DELETED=[{sortField:o.SortField.FILENAME,label:r._("Name"),popoverTriggerLabel:r._("Name"),isLocked:!0,isSortDisabled:!0},{sortField:o.SortField.MODIFIED,label:r._("Deleted"),popoverTriggerLabel:r._("Deleted"),isLocked:!0,isSortDisabled:!0}],t.FilesViewTileGridConstants={NUM_THRESHOLD_ROWS:10,SCROLL_DELTA_THRESHOLD:1},t.AllNewFolderCreationStates=[o.NewFolderCreationState.CREATE_FOLDER_INACTIVE,o.NewFolderCreationState.PENDING_INPUT,o.NewFolderCreationState.SAVING_INPUT],t.AllRenameStates=[o.RenameState.PENDING_INPUT,o.RenameState.SAVING_INPUT],t.AllViewTypes=[o.ViewType.Grid,o.ViewType.LargeGrid,o.ViewType.List],t.ViewTypeLabels=(i={},i[o.ViewType.Grid]=r._("Small"),i[o.ViewType.List]=r._("List"),i[o.ViewType.LargeGrid]=r._("Large"),i),t.AllDropTargetHighlightModes=[o.DropTargetHighlightMode.NONE,o.DropTargetHighlightMode.ALL_FOLDERS,o.DropTargetHighlightMode.NONSELECTED_FOLDERS,o.DropTargetHighlightMode.NONSELECTED_NONSHARED_FOLDERS,o.DropTargetHighlightMode.NONSELECTED_NONSHARED_NONTEAM_FOLDERS],t.AllSortFields=[o.SortField.FILENAME,o.SortField.MODIFIED,o.SortField.CATEGORY,o.SortField.EXTENSION,o.SortField.SIZE,o.SortField.SHARED_WITH,o.SortField.SYNC_SETTING,o.SortField.FILE_COUNTS],t.SortIsFilename=[o.SortField.FILENAME,o.SortField.CATEGORY,o.SortField.EXTENSION,o.SortField.SHARED_WITH,o.SortField.SYNC_SETTING],t.AllLoadingStates=[o.LoadingState.LOADED,o.LoadingState.LOADING_FIRST_PAGE,o.LoadingState.LOADING_REMAINING_PAGES],t.AllSortDirections=[o.SortDirection.ASCENDING,o.SortDirection.DESCENDING],t.ViewTypeThumbnailSizes=(l={},l[o.ViewType.Grid]=256,l[o.ViewType.LargeGrid]=512,l[o.ViewType.List]=32,l),t.ViewTypeGridSizes=(n={},n[o.ViewType.Grid]=160,n[o.ViewType.LargeGrid]=480,n[o.ViewType.List]=0,n),t.CulledListConstants={ITEM_ROW_HEIGHT_PX:46,MAESTRO_ITEM_ROW_HEIGHT_PX:57,SEARCH_ROW_HEIGHT_PX:53,MAESTRO_SEARCH_ROW_HEIGHT_PX:66,DEFAULT_HEADER_HEIGHT_PX:142,ITEM_BUFFER_SIZE:5},t.OverflowMenuConstants={MENU_ITEM_HEIGHT_PX:32,MENU_MARGIN_PX:8,MENU_POPOVER_ITEM_GROUP_SEPARATOR_HEIGHT_PX:17},t.VIEW_TYPE_COOKIE_NAME="browse_view_type",t.COLUMNS_STORAGE_KEY="browse_columns",t.VIEW_TYPE_STORAGE_KEY="files_view_types",t.VIEW_TYPE_GLOBAL_SCOPE="*",t.VIEW_TYPE_SCOPE_IMAGE_SEARCH=":search/image",t.IMAGE_THUMBNAIL_EXTENSIONS=["jpg","jpeg","png","tiff","tif","gif","bmp","webp","wbmp","psd","svg","svgz","ai","eps","otf","ttf","3gp","3gpp","3gpp2","asf","avi","dv","flv","m2t","m4v","mkv","mov","mp4","mpeg","mpg","mts","mxf","oggtheora","ogv","rm","ts","vob","webm","wmv"],t.defaultViewTypes=(a={},a[t.VIEW_TYPE_GLOBAL_SCOPE]=o.ViewType.List,a[t.VIEW_TYPE_SCOPE_IMAGE_SEARCH]=o.ViewType.LargeGrid,a)}),define("modules/clean/react/files_view/drag_and_drop",["require","exports","modules/clean/react/browse/models","modules/clean/react/no-jquery"],function(e,t,o,r){"use strict";function i(e,t,o,i,l,n,s){a.add(e,"dragenter",function(e){(t()||o())&&!r.closestElement(e.target,l)&&n()&&(s(null),i())})}function l(e){a.remove(e,"dragenter")}function n(e,t,r,i,l,n,a,s){if(t||r){if(e.is_dir&&!(i&&r)){if(l)return;var d=n.isCurrentPathWriteable()&&!o.File.isReadOnlySharedFolder(e);a(e),s({path:e.fq_path,hasPermissionToUploadToFolder:d})}else a(null),s()}}Object.defineProperty(t,"__esModule",{value:!0});var a=new r.ScopedEventHandlers(document);t.setupExternalDragHandler=i,t.cleanupExternalDragHandler=l,t.onFileDragEnterItem=n}),define("modules/clean/react/files_view/file_jump",["require","exports","tslib","modules/clean/keycode","modules/clean/react/no-jquery","modules/core/dom"],function(e,t,o,r,i,l){"use strict";function n(e,t,o,n){var d=null!=e.which?e.which:e.keyCode,c=String.fromCharCode(d);d<r.KeyCode.SPACE||a.includes(c)||!i.closestElement(document.activeElement,".brws-checkbox-cell")&&l.focus_in_input()||e.metaKey||e.altKey||e.altGraphKey||e.ctrlKey||d===r.KeyCode.SPACE&&!t()||(d===r.KeyCode.SPACE&&t()&&e.preventDefault(),o(c),null!=s&&clearTimeout(s),s=setTimeout(function(){n()},1e3))}Object.defineProperty(t,"__esModule",{value:!0}),l=o.__importStar(l);var a=["/","\\",":","?","*","<",">","|"],s=null;t.handleKeyPress=n}),define("modules/clean/react/files_view/file_list_empty_folder_table",["require","exports","tslib","external/immutable","external/lodash","react","spectrum/media_table","spectrum/table","modules/clean/react/files_view/keyboard_shortcuts","modules/clean/react/files_view/types"],function(e,t,o,r,i,l,n,a,s,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r=o.__importStar(r),i=o.__importStar(i),l=o.__importDefault(l);var c=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.__extends(t,e),t.prototype.componentDidMount=function(){this.props.onTTI&&this.props.onTTI(),this.setupKeyboardShortcuts()},t.prototype.componentWillUnmount=function(){this.cleanupKeyboardShortcuts()},t.prototype.setupKeyboardShortcuts=function(){var e=this;s.setupFilesViewKeyboardShortcuts({viewType:d.ViewType.List,getIsGlobalEvent:s.generateGetIsGlobalEvent(this),getIsItemEvent:function(){return!1},getSelectedFiles:function(){return r.OrderedMap()},isCurrentPathWriteable:function(){return!1},selectAllAction:i.noop,deselectAllAction:i.noop,onCopyToClipboard:i.noop,onDelete:i.noop,onFocusSearchBar:this.props.onFocusSearchBar,onNavigateToFileOrFolder:i.noop,onNavigateToParentFolder:this.props.onNavigateToParentFolder,onPasteFromClipboard:this.props.onPasteFromClipboard,onShowRename:i.noop,scope:"EmptyFolderTable",onShowHelpMenu:function(){return e.props.onOpenKeyboardShortcutModal()}})},t.prototype.cleanupKeyboardShortcuts=function(){s.resetFilesViewKeyboardShortcuts("EmptyFolderTable")},t.prototype._renderTitle=function(){return l.default.createElement("h3",{className:"u-font-strong empty-folder-table-title"},this.props.title)},t.prototype._renderSubtitle=function(){var e=this.props,t=e.subtitle,o=e.subtitleLink,r=e.subtitleOnClick;return t&&o?l.default.createElement("a",{className:"empty-folder-table-subtitle empty-folder-table-link",href:o,onClick:r},t):t?l.default.createElement("span",{className:"empty-folder-table-subtitle"},t):void 0},t.prototype.render=function(){for(var e=[],t=0;t<this.props.numRowsAbove;t++)e.push(l.default.createElement(n.MediaRow,{key:-t-1}));for(var o=[],r=Math.max(this.props.totalRows-this.props.numRowsAbove-1,0),t=0;t<r;t++)o.push(l.default.createElement(n.MediaRow,{key:t+1}));return l.default.createElement(a.Table,{role:"main","aria-atomic":"true","aria-live":"polite",className:"empty-folder-table"},l.default.createElement(a.TableHead,null),l.default.createElement(a.TableBody,null,e,l.default.createElement(n.MediaRow,{key:0},l.default.createElement(n.MediaCell,{className:"empty-folder-table-cell",title:this._renderTitle(),subtitle:this._renderSubtitle()})),o))},t.defaultProps={numRowsAbove:2,totalRows:14,onFocusSearchBar:i.noop,onPasteFromClipboard:i.noop,onNavigateToParentFolder:i.noop,onOpenKeyboardShortcutModal:i.noop},t})(l.default.PureComponent);t.EmptyFolderTable=c}),define("modules/clean/react/files_view/file_list_utils",["require","exports","modules/clean/filetypes","modules/clean/react/files_view/types","modules/clean/react/browse/models","modules/clean/sharing/browse_exports"],function(e,t,o,r,i,l){"use strict";function n(e){var t=e.file,l=e.isSelected,n=e.dropTargetHighlightMode;if(n===r.DropTargetHighlightMode.NONE)return!1;if(!t.is_dir)return!1;if(i.File.isReadOnlySharedFolder(t))return!1;if(t.isDeleted)return!1;switch(n){case r.DropTargetHighlightMode.ALL_FOLDERS:return!0;case r.DropTargetHighlightMode.NONSELECTED_FOLDERS:return!l;case r.DropTargetHighlightMode.NONSELECTED_NONSHARED_FOLDERS:return!l&&t.type!==o.FileTypes.SHARED_FOLDER;case r.DropTargetHighlightMode.NONSELECTED_NONSHARED_NONTEAM_FOLDERS:return!l&&![o.FileTypes.SHARED_FOLDER,o.FileTypes.TEAM_SHARED_FOLDER].includes(t.type)}return!1}function a(e){var t=e.context,r=e.file;e.user;return r.isDeleted||r.is_dir&&l.shouldUsePublicFolderSharing(t.config,r.fq_path)||i.File.isTeamMemberFolder(r)||!i.File.canViewFileMembers(r,t)||r.type===o.FileTypes.SANDBOX}Object.defineProperty(t,"__esModule",{value:!0}),t.shouldFileBeHighlightedDropTarget=n,t.isSharingDisabledForFile=a}),define("modules/clean/react/files_view/file_thumbnail",["require","exports","tslib","react","external/classnames","modules/clean/react/files_view/util","modules/clean/filepath","modules/clean/react/files_view/constants","modules/clean/react/icon/file_folder_icon","modules/clean/user_education/react/user_education_effect"],function(e,t,o,r,i,l,n,a,s,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r=o.__importDefault(r),i=o.__importDefault(i),n=o.__importStar(n);var c=(function(e){function t(t){var o=e.call(this,t)||this;o._thumbRequestId=null,o.handleThumbnailError=function(){o.setState({thumbnailSrc:null})};var r=t.thumbStore,i=t.file.thumbnail_url_tmpl;return o.state={thumbnailSrc:i?r.get_thumb(i):null},o}return o.__extends(t,e),t.prototype.componentDidMount=function(){this.fetchThumbnail(this.props)},t.prototype.componentWillReceiveProps=function(e){e.file.thumbnail_url_tmpl!==this.props.file.thumbnail_url_tmpl&&(this.unbindThumbnailIfNeeded(),this.fetchThumbnail(e))},t.prototype.componentWillUnmount=function(){this.unbindThumbnailIfNeeded()},t.prototype.fetchThumbnail=function(e){var t=this,o=e.file,r=e.showImageThumbnailOnly,i=e.thumbStore,s=l.isFile(o)?n.file_extension(n.filename(o.fq_path)):o.ext&&"."===o.ext[0]?o.ext.slice(1):o.ext;if(!r||a.IMAGE_THUMBNAIL_EXTENSIONS.includes(s)){var d=o.thumbnail_url_tmpl;d&&(this._thumbRequestId=i.bind_url(d,{onSuccess:function(){t.setState({thumbnailSrc:i.get_thumb(d)})},onError:function(){t.handleThumbnailError()}}))}},t.prototype.unbindThumbnailIfNeeded=function(){var e=this.props.thumbStore;this._thumbRequestId&&(e.unbind_url(this._thumbRequestId),this._thumbRequestId=null),this.setState({thumbnailSrc:null})},t.prototype.render=function(){var e=this.props,t=e.file,o=e.showCDMUserEducationEffects,n=this.state.thumbnailSrc,a=l.isFile(t)?t.fq_path:t.filename;return n?r.default.createElement("img",{alt:a,draggable:!1,className:i.default("brws-file-name-cell-icon","brws-file-name-cell-thumb"),src:n,onError:this.handleThumbnailError}):r.default.createElement(u,{file:t,showCDMUserEducationEffects:o})},t})(r.default.PureComponent);t.FileThumbnail=c;var u=function(e){var t=e.file,o=e.showCDMUserEducationEffects,i=l.isFile(t)?t:{type:t.type,icon:t.icon,fq_path:"/"+t.filename,thumbnail_url_tmpl:t.thumbnail_url_tmpl},n=r.default.createElement(s.FileOrFolderIcon,{className:"brws-file-name-cell-icon",file:i,showPreview:!1});return o?r.default.createElement(d.UserEducationEffect,{containerName:"FileItemRow",name:"TMFIcon",useSpan:!0},n):n}}),define("modules/clean/react/files_view/keyboard_shortcuts",["require","exports","tslib","external/keymaster","external/react-dom","modules/clean/react/browse/action_logger","modules/clean/react/files_view/file_jump","modules/clean/react/files_view/types","modules/clean/react/no-jquery","modules/clean/undo","modules/core/browser_detection","modules/core/i18n","modules/core/notify"],function(e,t,o,r,i,l,n,a,s,d,c,u,p){"use strict";function f(e){r.default.clearScope(e),r.default.setScope(T)}function m(e,t){return function(o){e(o)&&(o.preventDefault(),"function"==typeof t&&t(o))}}function h(e){return function(t){return!document.activeElement||document.activeElement===document.body||t.target instanceof Element&&i.findDOMNode(e).contains(t.target)}}function _(e){f(e),v.remove(e,"keydown"),v.remove(e,"keyup")}function g(e){var t=e.user,o=e.viewType,r=e.getSelectedFiles,i=e.isCurrentPathWriteable,n=e.onShowHelpMenu,s=e.onDelete,c=e.onShowRename,f=e.onFocusSearchBar,m=e.onNavigateToFileOrFolder,h=e.onNavigateToParentFolder,_=e.selectAllAction,g=e.onCopyToClipboard,S=e.onPasteFromClipboard,E=e.deselectAllAction,b=function(){var e=r(),t=e.some(function(e){return e.read_only});if(1===e.size)if(i()&&!t){var o=e.first();o.isDeleted?p.Notify.error(u._("Deleted files can’t be renamed.")):c(o)}else p.Notify.warning(u._("You don’t have permission to rename files in this folder."))},T=function(){var e=r();e.size&&s(e.toArray())},v=function(){d.performUndo()},w=function(){var e=r();1===e.size&&m(e.first())},y=function(){var e=r(),t=e.first();1===e.size&&t.is_dir&&m(t)},F=function(e,r){l.logKeyboardShortcutUsage({user_id:t?t.id:null,view_type:o,keyboard_shortcut_type:e}),r()};return{renameFile:function(){F("rename",b)},focusSearchBar:function(){F("search",f)},showHelpMenu:function(){F("help",function(){return n(o===a.ViewType.List)})},selectAll:function(){F("select-all",_)},copyToClipboard:function(){F("copy",g)},deleteFiles:function(){F("delete",T)},pasteFromClipboard:function(){F("paste",S)},undoAction:function(){F("undo",v)},deselectFiles:function(){F("deselect",E)},navigateToFileOrFolder:function(){F("navigate-file-folder",w)},navigateToFolder:function(){F("navigate-folder",y)},navigateToParent:function(){F("navigate-parent",h)}}}function S(e){var t=e.scope,o=e.getIsItemEvent,i=e.getIsGlobalEvent;T=r.default.getScope(),T!==t&&r.default.setScope(t);var l=g(e);r.default("f2",t,m(o,l.renameFile)),r.default("/",t,m(i,l.focusSearchBar)),r.default("shift+/",t,m(i,l.showHelpMenu)),r.default("escape",t,m(i,l.deselectFiles)),c.mac?(r.default("command+a",t,m(i,l.selectAll)),r.default("command+c",t,m(o,l.copyToClipboard)),r.default("backspace",t,m(o,l.deleteFiles)),r.default("command+v",t,m(i,l.pasteFromClipboard)),r.default("command+z",t,m(i,l.undoAction))):(r.default("ctrl+a",t,m(i,l.selectAll)),r.default("ctrl+c",t,m(o,l.copyToClipboard)),r.default("delete",t,m(o,l.deleteFiles)),r.default("ctrl+v",t,m(i,l.pasteFromClipboard)),r.default("ctrl+z",t,m(i,l.undoAction))),e.viewType===a.ViewType.List&&(r.default("enter",t,m(o,l.navigateToFileOrFolder)),r.default("right",t,m(o,l.navigateToFolder)),r.default("left",t,m(i,l.navigateToParent)))}function E(e){var t=(e.user,e.viewType,e.scope),o=e.getIsFileJumping,i=e.onAddFileJumpKeyCode,l=e.onResetFileJump,a=function(e){r.default.getScope()===t&&n.handleKeyPress(e,o,i,l)};v.add(t,"keypress",a)}function b(e){v.remove(e,"keypress")}Object.defineProperty(t,"__esModule",{value:!0}),r=o.__importDefault(r),i=o.__importStar(i),n=o.__importStar(n),d=o.__importStar(d),c=o.__importStar(c),t.FILES_VIEW_SHORTCUTS=[{windowsKey:u._("Enter",{comment:"Windows keyboard name for the enter/return key (capitalized Enter)"}),macKey:u._("return",{comment:"Mac keyboard name for the enter/return key (all lowercase return)"}),desc:u._("Open file or folder")},{key:u._("/",{comment:"Keyboard symbol for the forward slash"}),desc:u._("Search")},{windowsKey:u._("Ctrl + a",{comment:"Windows keyboard name for the control key plus a key (capitalized Ctrl)"}),macKey:u._("⌘ + a",{comment:"Mac keyboard name for the command key plus a key (⌘ symbol)"}),desc:u._("Select all files")},{windowsKey:u._("Esc",{comment:"Windows keyboard name for the esc key (capitalized)"}),macKey:u._("esc",{comment:"Mac keyboard name for the esc key (all lowercase)"}),desc:u._("Deselect all files")},{windowsKey:u._("Ctrl + c",{comment:"Windows keyboard name for the control key plus c key (capitalized Ctrl)"}),macKey:u._("⌘ + c",{comment:"Mac keyboard name for the command key plus c key (⌘ symbol)"}),desc:u._("Copy selected file(s)")},{windowsKey:u._("Ctrl + v",{comment:"Windows keyboard name for the control key plus v key (capitalized Ctrl)"}),macKey:u._("⌘ + v",{comment:"Mac keyboard name for the command key plus v key (⌘ symbol)"}),desc:u._("Paste selected file(s) into the current folder")},{key:u._("F2",{comment:"Keyboard name for the F2 key"}),desc:u._("Rename selected file")},{windowsKey:u._("Delete",{comment:"Windows keyboard name for the delete key (capitalized)"}),macKey:u._("delete",{comment:"Mac keyboard name for the delete key (all lowercase)"}),desc:u._("Delete selected file(s)")},{windowsKey:u._("Ctrl + z",{comment:"Windows keyboard name for the control key plus z key (capitalized Ctrl)"}),macKey:u._("⌘ + z",{comment:"Mac keyboard name for the command key plus z key (⌘ symbol)"}),desc:u._("Undo recent move/copy/rename/delete")},{key:u._("?",{comment:"Keyboard symbol for the question mark"}),desc:u._("Show keyboard shortcuts")}],t.FILES_VIEW_LIST_SHORTCUTS=[{key:u._("↑",{comment:"Keyboard symbol for the up arrow key"}),desc:u._("Select previous file (hold shift to select range)",{comment:"Shift refers to the shift key"})},{key:u._("↓",{comment:"Keyboard symbol for the down arrow key"}),desc:u._("Select next file (hold shift to select range)",{comment:"Shift refers to the shift key"})},{key:u._("←",{comment:"Keyboard symbol for the left arrow key"}),desc:u._("Go up a folder")},{key:u._("→",{comment:"Keyboard symbol for the right arrow key"}),desc:u._("Open folder")}].concat(t.FILES_VIEW_SHORTCUTS),t.FILES_VIEW_TILE_GRID_SHORTCUTS=[{key:u._("↑",{comment:"Keyboard symbol for the up arrow key"}),desc:u._("Select file in previous row (hold shift to select range)",{comment:"Shift refers to the shift key"})},{key:u._("↓",{comment:"Keyboard symbol for the down arrow key"}),desc:u._("Select file in next row (hold shift to select range)",{comment:"Shift refers to the shift key"})},{key:u._("←",{comment:"Keyboard symbol for the left arrow key"}),desc:u._("Select previous file (hold shift to select range)",{comment:"Shift refers to the shift key"})},{key:u._("→",{comment:"Keyboard symbol for the right arrow key"}),desc:u._("Select next file (hold shift to select range)",{comment:"Shift refers to the shift key"})}].concat(t.FILES_VIEW_SHORTCUTS);var T="",v=new s.ScopedEventHandlers(document);t.generateGetIsGlobalEvent=h,t.resetFilesViewKeyboardShortcuts=_,t.getActionsAndAttachLogging=g,t.setupFilesViewKeyboardShortcuts=S,t.setupFileJumpKeyboardShortcuts=E,t.resetFileJumpKeyboardShortcuts=b}),define("modules/clean/react/files_view/name_input",["require","exports","tslib","external/classnames","react","modules/clean/keycode","modules/clean/react/files_view/types"],function(e,t,o,r,i,l,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r=o.__importDefault(r),i=o.__importDefault(i);var a=function(){},s=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.setInputRef=function(e){t.inputRef=e},t.handleDragStart=function(e){e.stopPropagation()},t.handleSubmit=function(e){e.preventDefault(),t.submitIfChanged(n.NameInputActionSource.SUBMIT)},t.handleKeyDown=function(e){e.keyCode===l.KeyCode.ESC?(e.preventDefault(),t.props.onCancel({source:n.NameInputActionSource.ESC})):e.keyCode===l.KeyCode.ENTER&&t.handleSubmit(e)},t.handleBlur=function(e){t.submitIfChanged(n.NameInputActionSource.BLUR)},t.handleClick=function(e){e.preventDefault(),t.props.onClick(e)},t}return o.__extends(t,e),t.prototype.componentDidMount=function(){var e=this;this.inputRef.focus(),window.requestAnimationFrame(function(){var t=e.inputRef.value,o=e.props.isDir?t.length:t.lastIndexOf(".");o<0&&(o=t.length),e.inputRef.setSelectionRange(0,o)})},t.prototype.submitIfChanged=function(e){var t=this.inputRef.value.trim();t===this.props.defaultValue?this.props.onCancel({source:e}):this.props.onSubmit(t)},t.prototype.render=function(){return i.default.createElement("form",{className:"u-pad-right-xs",onSubmit:this.handleSubmit},i.default.createElement("input",{ref:this.setInputRef,defaultValue:this.props.defaultValue,className:r.default("c-input",this.props.className),onBlur:this.handleBlur,onKeyDown:this.handleKeyDown,onDragStart:this.handleDragStart,"aria-label":this.props.label,onClick:this.handleClick}))},t.defaultProps={className:"",onCancel:a,onClick:a,onSubmit:a,idDir:null},t})(i.default.PureComponent);t.NameInput=s}),define("modules/clean/react/files_view/overflow_menu",["require","exports","tslib","react","spectrum/overflow_button","spectrum/popover","modules/clean/react/async/loadable","modules/clean/react/files_view/constants","modules/clean/react/files_view/overflow_menu_item_section","modules/core/browser_detection","modules/core/i18n"],function(e,t,o,r,i,l,n,a,s,d,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r=o.__importDefault(r),t.AsyncFilesViewMobileOverflowMenu=n.Loadable({loader:function(){return new Promise(function(t,o){e(["modules/clean/react/files_view/mobile_overflow_menu"],t,o)}).then(o.__importStar).then(function(e){return e.FilesViewMobileOverflowMenu})}});var u;(function(e){e[e.Normal=0]="Normal",e[e.Small=1]="Small"})(u=t.OverflowMenuSize||(t.OverflowMenuSize={}));var p=(function(e){function i(t){var o=e.call(this,t)||this;return o.onClick=function(e){e.preventDefault(),e.stopPropagation()},o.handleSelection=function(e){e.performAction()},o.setOverflowMenuRef=function(e){o.overflowMenuContent=e},o.handleMenuToggle=function(e){var t=e.isOpen,r=e.isPopover,l=void 0===r||r;if(i.isDynamicProps(o.props)&&t){var n=o.props.getOverflowMenuActions(o.props.file,!!o.props.canDisplayFolderSizes);o.setState({actionSection:n}),l&&o.setState({popoverContentPosition:o.calculatePopoverContentPosition(n)})}},o.handleMobileMenuOpen=function(e){return function(){o.handleMenuToggle({isOpen:!0,isPopover:!1}),e()}},o.state={popoverContentPosition:"below",actionSection:i.isDynamicProps(t)?[]:t.actionSection},o}return o.__extends(i,e),i.prototype.componentDidMount=function(){i.isDynamicProps(this.props)||this.setState({popoverContentPosition:this.calculatePopoverContentPosition(this.props.actionSection)})},i.prototype.calculatePopoverContentPosition=function(e){if(e.length<=0||!this.overflowMenuContent)return this.state.popoverContentPosition;var t=this.overflowMenuContent.getElementsByClassName("browse-overflow-menu-trigger-button")[0],o=a.OverflowMenuConstants.MENU_ITEM_HEIGHT_PX*e[0].length+2*a.OverflowMenuConstants.MENU_MARGIN_PX;e.length>1&&(o+=a.OverflowMenuConstants.MENU_ITEM_HEIGHT_PX*e[1].length+a.OverflowMenuConstants.MENU_POPOVER_ITEM_GROUP_SEPARATOR_HEIGHT_PX);var r=t.getBoundingClientRect(),i=this.props.viewportTopOffset||a.CulledListConstants.DEFAULT_HEADER_HEIGHT_PX;return r.top>o+i&&r.bottom+o>window.innerHeight?"above":"below"},i.prototype.render=function(){var e=this,n=this.props,a=n.attachment,c=n.isResponsive,u=n.size,p=n.showBorders,f=n.ariaHidden,m=i.isDynamicProps(this.props)?this.props:{},h=m.file,_=void 0===h?void 0:h,g=m.thumbStore,S=void 0===g?void 0:g,E=c&&d.is_mobile_or_tablet();return r.default.createElement("div",{className:"browse-overflow-menu",onClick:this.onClick,onDoubleClick:this.onClick,ref:this.setOverflowMenuRef,"aria-hidden":f?"true":void 0},E?r.default.createElement(t.AsyncFilesViewMobileOverflowMenu,{trigger:function(o){var i=o.openMobileMenu;return r.default.createElement(t.FilesViewOverflowMenuButton,{onClick:e.handleMobileMenuOpen(i),showBorders:p,size:u})},file:_,actionSection:this.state.actionSection,thumbStore:S}):r.default.createElement(l.Popover,{closeOnSelection:!0,onMenuToggle:this.handleMenuToggle,onSelection:this.handleSelection},r.default.createElement(l.PopoverTrigger,o.__assign({className:"browse-overflow-menu-trigger"},o.__assign({},f&&{tabIndex:-1})),r.default.createElement(t.FilesViewOverflowMenuButton,{size:u,showBorders:p})),r.default.createElement(l.PopoverContent,{attachment:a,className:"browse-overflow-menu-content",position:this.state.popoverContentPosition},r.default.createElement(s.OverflowMenuItemSection,{actionSection:this.state.actionSection,renderItem:function(e){return r.default.createElement(l.PopoverContentItem,{className:e.className,disabled:e.disabled,value:e},e.label)}}))))},i.isDynamicProps=function(e){return"file"in e},i.defaultProps={attachment:"right",onMenuToggle:function(){}},i})(r.default.PureComponent);t.FilesViewOverflowMenu=p,t.FilesViewOverflowMenuButton=function(e){var t=e.size,o=e.showBorders,l=e.onClick;return r.default.createElement(i.OverflowButton,{"aria-label":c._("More actions"),className:"browse-overflow-menu-trigger-button",onClick:l,size:t===u.Small?"small":"default",tagName:"span",variant:o?"secondary":"borderless"})}}),define("modules/clean/react/files_view/overflow_menu_item_section",["require","exports","tslib","react","spectrum/popover"],function(e,t,o,r,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r=o.__importDefault(r),t.OverflowMenuItemSection=function(e){var t=e.actionSection,o=e.showSeparators,l=void 0===o||o,n=e.renderItem;return 0===t.length?null:r.default.createElement(r.default.Fragment,null,t.map(function(e){return e.map(function(e,t){return r.default.createElement(r.default.Fragment,{key:t+"-"+e.label},n(e))})}).reduce(function(e,t,o){return e.concat(l?[r.default.createElement(i.PopoverItemGroupSeparator,{key:o})]:[],t)}))}}),define("modules/clean/react/files_view/star",["require","exports","tslib","react","modules/clean/react/async/loadable"],function(e,t,o,r,i){"use strict"
;Object.defineProperty(t,"__esModule",{value:!0}),r=o.__importDefault(r),t.StarContainer=i.Loadable({loader:function(){return o.__awaiter(this,void 0,Promise,function(){var t,i,l,n;return o.__generator(this,function(a){switch(a.label){case 0:return[4,new Promise(function(t,o){e(["modules/clean/react/starred/browse_exports"],t,o)}).then(o.__importStar)];case 1:return t=a.sent(),i=t.idTypePairFromStarrableItem,l=t.Star,n=t.StarredSource,[2,function(e){var t=e.item,o=e.user,a=e.className,s=e.onStarClick,d=e.isReadOnly,c=e.isTabbing,u=e.tabIndex,p=i(t),f=p.id,m=p.type;return r.default.createElement("div",{className:a},r.default.createElement(l,{id:f,key:"star",idType:m,user:o,onStarClick:s,source:n.BROWSE,isReadOnly:d,isTabbing:c,tabIndex:u}))}]}})})}})}),define("modules/clean/react/files_view/tile_grid",["require","exports","tslib","react","external/classnames","external/immutable","spectrum/button","modules/clean/em_string","modules/clean/filepath","modules/clean/filetypes","modules/clean/react/browse/models","modules/clean/react/files_view/constants","modules/clean/react/files_view/drag_and_drop","modules/clean/react/files_view/file_list_utils","modules/clean/react/files_view/keyboard_shortcuts","modules/clean/react/files_view/overflow_menu","modules/clean/react/files_view/star","modules/clean/react/files_view/tile_label_input","modules/clean/react/files_view/types","modules/clean/react/files_view/util","modules/clean/react/maestro/tile_grid","modules/clean/react/selectable_list","modules/clean/react/title_bubble","modules/core/browser","modules/core/i18n","modules/core/uri"],function(e,t,o,r,i,l,n,a,s,d,c,u,p,f,m,h,_,g,S,E,b,T,v,w,y,F){"use strict";function L(e,t){var o;return e&&(o=F.URI.parse(e),o=o.removeQuery("size").removeQuery("size_mode"),o=o.updateQuery({size:t+"x"+t,size_mode:"2"}).toString()),o}function I(e){var t=e instanceof c.File?s.filename(e.fq_path):e instanceof c.FileSharedWithMe?e.filename:e instanceof c.Paper?e.title:e.name;if(e instanceof c.File)switch(e.type){case d.FileTypes.FOLDER:t=y._("Folder, %(alt)s").format({alt:t});break;case d.FileTypes.PACKAGE:t=y._("Package, %(alt)s").format({alt:t});break;case d.FileTypes.SHARED_FOLDER:t=y._("Shared folder, %(alt)s").format({alt:t});break;case d.FileTypes.SANDBOX:t=y._("Sandbox, %(alt)s").format({alt:t});break;case d.FileTypes.TEAM_SHARED_FOLDER:t=y._("Team shared folder, %(alt)s").format({alt:t});break;case d.FileTypes.TEAM_MEMBER_FOLDER:t=y._("Team member folder, %(alt)s").format({alt:t});break;default:t=y._("File, %(alt)s").format({alt:t})}return t}Object.defineProperty(t,"__esModule",{value:!0}),r=o.__importDefault(r),i=o.__importDefault(i),l=o.__importStar(l),s=o.__importStar(s),w=o.__importStar(w),t.getThumbnailUrlForItem=L;var C=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onStarClickCallback=function(e){var o=t.props,r=o.onStarClick,i=o.item,l=i;r&&r(l,e)},t}return o.__extends(t,e),t.prototype.render=function(){var e,t=this.props,o=t.fileRename,i=t.arePostTTIModulesLoaded,l=t.user,n=t.item,d=t.inSelectMode,p=t.createRenameCancelHandler,f=t.createRenameSubmitHandler,m=t.isItemFileAndFocused;if(e=n instanceof c.File?s.filename(n.fq_path):n instanceof c.FileSharedWithMe?n.filename:n instanceof c.Paper?n.title:n.name,n instanceof c.File&&o&&s.paths_are_equal(o.file.fq_path,n.fq_path)){if(o.state===S.RenameState.PENDING_INPUT)return r.default.createElement(g.TileLabelInput,{defaultValue:e,label:e,onCancel:p(n),onSubmit:f(n)});if(o.state===S.RenameState.SAVING_INPUT)return r.default.createElement(b.TileItemLabelText,{className:"tile-label__text--saving",label:y._("Renaming…")})}var h=a.Emstring.em_snippet(e,14,.5),E=i&&!d&&n instanceof c.File&&!c.File.isNoAccessSharedFolder(n),T=r.default.createElement(b.TileItemLabelText,{key:"label",label:h});if(e!==h){var w=e.length<=u.FILE_NAME_TOOLTIP_MAX_LINE_LENGTH?e:r.default.createElement("div",{className:"tile-label-tooltip"},e);T=r.default.createElement(v.TitleBubble,{content:w,position:v.TitleBubble.POSITIONS.BOTTOM,className:"tile-label__title-bubble",key:"tooltip"},T)}var F=n instanceof c.File?this.onStarClickCallback:void 0,L=r.default.createElement(_.StarContainer,{item:n,user:l,className:"tile-star",key:"tileStar",onStarClick:F,tabIndex:m?0:-1});return r.default.createElement("span",null,[T,E&&!o&&L])},t})(r.default.PureComponent);t.TileLabel=C;var M=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={inSelectMode:!1,selectedIds:l.Set()},t.handleFileViewerUnmount=function(){t.tileGrid&&t.tileGrid.getAndUpdateTileLayout();var e=t.props.selectedFiles.first();e&&t.props.onFocusFile(e.fq_path)},t.createRenameCancelHandler=function(e){return function(){t.props.onRenameCancel(e)}},t.createRenameSubmitHandler=function(e){return function(o){t.props.onRenameSubmit(e,o)}},t.isItemFileAndFocused=function(e){var o=e instanceof c.File,r=e;if(!o)return!1;var i=t.props.selection;return t.state.inSelectMode&&o&&i.selected.last()===r.fq_path},t.setTileGridRef=function(e){t.tileGrid=e},t.hrefForItem=function(e,o){return o instanceof c.File?t.props.hrefForFile(e,o):o instanceof c.FileSharedWithMe?o.href:o.url},t.getTileItem=function(e,o){var i=t.props,l=i.activeDropTarget,a=i.isCreateFolderUIActive,s=i.isPhotosPage,d=i.items,p=i.selection,f=i.user,m=i.viewType,h=i.disabledMultiselect,_=t.state.inSelectMode;if(a){if(0===e)return t.getCreateFolderTile();e-=1}var g=d.get(e);if(!g){var S="Placeholder "+e;return{altText:S,id:S,isViewOnly:!0,isDraggable:!1,isSelectable:!1}}var E=g instanceof c.File,b=g,T=_&&E,v=t.isItemFileAndFocused(b),w=T&&p.selected.has(b.fq_path),F=t.createViewFileHandler(b),C=t.createToggleSelectHandler(b,w),M=T?r.default.createElement(n.Button,{className:"tile__action-button--view-file",variant:"secondary",size:"small","aria-label":y._("View File"),onClick:F,tabIndex:v?0:-1}):g instanceof c.File?t.renderTileOverflowMenu(g,o):void 0,N=T?C:F,D=s?void 0:t.renderLabelElement(g),R=I(g),O=g===l,P=t.hrefForItem(f,g),A=g instanceof c.File||g instanceof c.FileSharedWithMe?L(g.thumbnail_url_tmpl,u.ViewTypeThumbnailSizes[m]):void 0;return{file:b,paper:g instanceof c.Paper?g:void 0,fileSharedWithMe:g instanceof c.FileSharedWithMe?g:void 0,id:c.itemId(g),labelNode:D,altText:R,thumbnailUrl:A,actionNode:M,onTileAction:N,isDraggable:!s,isViewOnly:h,isFocused:v,isSelectable:E,handleToggleSelect:C,checkboxAriaText:y._("Select tile"),href:P,onDragEnter:s?void 0:t.createDragEnterHandler(b,w,O),onDragStart:s?void 0:t.createDragStartHandler(b,w,C)}},t.shouldFileBeHighlightedDropTarget=function(e,o){var r=t.props.dropTargetHighlightMode;return f.shouldFileBeHighlightedDropTarget({file:e,isSelected:o,dropTargetHighlightMode:r})},t}return o.__extends(t,e),t.prototype.componentWillMount=function(){this.setState({inSelectMode:this.props.selectedFiles.count()>0}),this.setSelectedTiles(this.props)},t.prototype.componentDidMount=function(){this.setupExternalDragHandler(),this.setupKeyboardShortcuts()},t.prototype.componentWillUnmount=function(){this.props.isPhotosPage||m.resetFileJumpKeyboardShortcuts(T.SELECTABLE_TILE_GRID_KEY_SCOPE),m.resetFilesViewKeyboardShortcuts(T.SELECTABLE_TILE_GRID_KEY_SCOPE),p.cleanupExternalDragHandler(T.SELECTABLE_TILE_GRID_KEY_SCOPE)},t.prototype.componentWillReceiveProps=function(e){e.selectedFiles!==this.props.selectedFiles&&(this.setSelectedTiles(e),this.setState({inSelectMode:e.selectedFiles.count()>0}))},t.prototype.componentDidUpdate=function(e){(e.createNewFolderState===S.NewFolderCreationState.PENDING_INPUT&&this.props.createNewFolderState===S.NewFolderCreationState.SAVING_INPUT||e.fileRename!==this.props.fileRename||e.items!==this.props.items||e.starredState!==this.props.starredState)&&this.tileGrid.forceUpdate()},t.prototype.getTotalNumItems=function(){var e=this.props,t=e.items,o=e.totalNumItems,r=e.isCreateFolderUIActive,i=Math.max(t.size,o);return r&&(i+=1),i},t.prototype.createToggleSelectHandler=function(e,t){var o=this,r=e.fq_path;return function(e){e.preventDefault(),e.stopPropagation();var i=o.props,l=i.onDeselectFile,n=i.onSelectFile,a="keyCode"in e,s=!a&&e.shiftKey;t?l(r,s):n(r,s)}},t.prototype.renderTileOverflowMenu=function(e,t){var o=this.props,i=o.getOverflowMenuActions,l=o.thumbStore,n=0===t?"left":"right";return r.default.createElement(h.FilesViewOverflowMenu,{file:e,thumbStore:l,getOverflowMenuActions:i,attachment:n,size:h.OverflowMenuSize.Small,showBorders:!0,ariaHidden:!0})},t.prototype.renderLabelElement=function(e){var t=this.state.inSelectMode,i=this.props,l=i.user,n=i.fileRename,a=i.arePostTTIModulesLoaded,s=i.onStarClick,d={user:l,fileRename:n,arePostTTIModulesLoaded:a,onStarClick:s};return r.default.createElement(C,o.__assign({},d,{item:e,inSelectMode:t,createRenameCancelHandler:this.createRenameCancelHandler,createRenameSubmitHandler:this.createRenameSubmitHandler,isItemFileAndFocused:this.isItemFileAndFocused(e)}))},t.prototype.createViewFileHandler=function(e){var t=this;return function(o){if(o.preventDefault(),o.stopPropagation(),"click"===o.type){var r=o;if(0===r.button){var i=t.hrefForItem(t.props.user,e);if(E.hasModifierKey(r))return void w.open_tab(i)}}e instanceof c.File?t.props.onNavigateToFileOrFolder(e,t.handleFileViewerUnmount):e instanceof c.FileSharedWithMe?t.props.onOpenFileSharedWithMe(e):e instanceof c.Paper&&t.props.onOpenPaper(e)}},t.prototype.setSelectedTiles=function(e){var t=l.Set().withMutations(function(t){e.selectedFiles.forEach(function(e){t.add(e.fq_path)})});this.setState({selectedIds:t})},t.prototype.setupExternalDragHandler=function(){var e=this,t=function(){return!!e.props.isDraggingInternalFiles},o=function(){return!!e.props.isDraggingExternalFiles},r=function(){return e.props.activeDropTarget};p.setupExternalDragHandler(T.SELECTABLE_TILE_GRID_KEY_SCOPE,t,o,this.props.onSetFileUploaderPath,".tile",r,this.props.onSetDropTarget)},t.prototype.setupKeyboardShortcuts=function(){var e=this,t=this.props,o=t.user,r=t.viewType,i=t.onDelete,l=t.onShowRename,n=t.deselectAll,a=t.getIsCurrentPathWriteable,s=t.getIsFileJumping,d=t.onAddFileJumpKeyCode,c=t.onResetFileJump,u=t.onCopyToClipboard,p=t.onFocusSearchBar,f=t.onPasteFromClipboard,h=t.selectAll,_=m.generateGetIsGlobalEvent(this),g=_,S=function(){return e.props.selectedFiles};this.props.isPhotosPage||m.setupFileJumpKeyboardShortcuts({user:o,viewType:r,scope:T.SELECTABLE_TILE_GRID_KEY_SCOPE,getIsFileJumping:s,onAddFileJumpKeyCode:d,onResetFileJump:c}),m.setupFilesViewKeyboardShortcuts({user:o,viewType:r,getIsGlobalEvent:_,getIsItemEvent:g,getSelectedFiles:S,isCurrentPathWriteable:a,selectAllAction:h,deselectAllAction:n,onCopyToClipboard:u,onDelete:i,onFocusSearchBar:p,onPasteFromClipboard:f,onShowRename:l,onNavigateToFileOrFolder:function(){},onNavigateToParentFolder:function(){},scope:T.SELECTABLE_TILE_GRID_KEY_SCOPE,onShowHelpMenu:function(){return e.props.onOpenKeyboardShortcutModal()}})},t.prototype.createDragEnterHandler=function(e,t,o){var r=this;return function(i){r.props.onDragEnter(i,e,t,o)}},t.prototype.createDragStartHandler=function(e,t,o){var r=this;return function(i){t?r.props.onDragStart(i):(o(i),r.props.onDragStart(i,[e]))}},t.prototype.getCreateFolderTile=function(){var e=this.props,t=e.createNewFolderState,o=e.onNewFolderCancel,i=e.onNewFolderSubmit,l=y._("New folder"),n=r.default.createElement("div",null);return t===S.NewFolderCreationState.PENDING_INPUT?(l=y._("Folder name"),n=r.default.createElement(g.TileLabelInput,{label:l,onCancel:o,onSubmit:i})):t===S.NewFolderCreationState.SAVING_INPUT&&(l=y._("Creating new folder…"),n=r.default.createElement(b.TileItemLabelText,{className:"tile-label__text--saving",label:l})),{altText:l,id:"New folder tile",isDraggable:!1,isSelectable:!1,labelNode:n}},t.prototype.getTileGridRef=function(){return this.tileGrid},t.prototype.render=function(){var e=this.props,t=e.enableMaxHeightGrouping,o=e.sections,l=e.viewType,n=i.default({"file-tile-grid-container":!0,"file-tile-grid-container--show-checkboxes":this.state.inSelectMode}),a=new Set;return this.state.selectedIds.forEach(function(e){return a.add(e)}),r.default.createElement("div",{role:"grid","aria-multiselectable":"true"},r.default.createElement(b.InfiniteTileGrid,{key:"tileGrid",ref:this.setTileGridRef,totalNumItems:this.getTotalNumItems(),containerClass:n,rowClass:"file-tile-row",enableMaxHeightGrouping:t,delayRenderFullTile:!this.props.isCreateFolderUIActive,logTileLoading:!0,numThresholdRows:u.FilesViewTileGridConstants.NUM_THRESHOLD_ROWS,scrollDeltaThreshold:u.FilesViewTileGridConstants.SCROLL_DELTA_THRESHOLD,sectionStartIndices:o.sectionStartIndices,sectionLabels:o.sectionLabels,showLabels:!this.props.isPhotosPage,contentOffset:136,getTileItem:this.getTileItem,selectedIds:a,handleTTI:this.props.onTTI,thumbStore:this.props.thumbStore,onRangeInView:this.props.onRangeInView,tilesPerRow:this.props.tilesPerRow,onTilesPerRowChange:this.props.onTilesPerRowChange,activeDropTarget:this.props.activeDropTarget,maxTileWidth:u.ViewTypeGridSizes[l],tileHeight:u.ViewTypeGridSizes[l],shouldFileBeHighlightedDropTarget:this.shouldFileBeHighlightedDropTarget}))},t.defaultProps={enableMaxHeightGrouping:!1},t})(r.default.PureComponent);t.FilesViewTileGrid=M}),define("modules/clean/react/files_view/tile_label_input",["require","exports","tslib","external/classnames","react","modules/clean/react/files_view/name_input"],function(e,t,o,r,i,l){"use strict";function n(e){var t=r.default("tile-label-input",e.className),o=e.defaultValue||"",n=function(e){e.stopPropagation(),e.preventDefault()};return i.default.createElement(l.NameInput,{className:t,defaultValue:o,label:e.label,onCancel:e.onCancel,onClick:n,onSubmit:e.onSubmit})}Object.defineProperty(t,"__esModule",{value:!0}),r=o.__importDefault(r),i=o.__importDefault(i),t.TileLabelInput=n}),define("modules/clean/react/files_view/util",["require","exports","tslib","modules/clean/react/browse/models","modules/clean/filepath"],function(e,t,o,r,i){"use strict";function l(e){return 0===e.button&&!n(e)}function n(e){return e.altKey||e.ctrlKey||e.metaKey}Object.defineProperty(t,"__esModule",{value:!0}),i=o.__importStar(i),t.shouldHandleClick=l,t.hasModifierKey=n,t.isFile=function(e){return e instanceof r.File},t.getFilename=function(e){return t.isFile(e)?i.filename(e.fq_path):e.filename}}),define("modules/clean/react/maestro/tile_grid",["require","exports","tslib","react","external/classnames","external/react-dom","spectrum/culled_list","modules/clean/filepath","modules/clean/js_client_stopwatch","modules/clean/react/maestro/tile_element","modules/clean/react/maestro/tile_grid_logger"],function(e,t,o,r,i,l,n,a,s,d,c){"use strict";function u(e){var t=null;return function(){for(var o=[],r=0;r<arguments.length;r++)o[r]=arguments[r];if(!t||t.length!==o.length||!t.every(function(e,t){return e===o[t]}))return t=o,e.apply(void 0,o)}}function p(e){var t=e.className,o=e.label;return t=i.default("tile-label__text",t),r.default.createElement("div",{className:t},o)}Object.defineProperty(t,"__esModule",{value:!0}),r=o.__importDefault(r),i=o.__importDefault(i),l=o.__importStar(l),a=o.__importStar(a);t.memoizeCallback=u,t.TileItemLabelText=p;var f=(function(e){function t(t){var o=e.call(this,t)||this;if(o.ttiReported=!1,o.itemRangeByRow=[],o.scrollTileIntoView=function(e,t){var r=o.props.contentOffset||0,i=document.documentElement.scrollTop||document.body.scrollTop,l=Math.floor(t/o.props.tilesPerRow),n=e-r,a=o.getRowHeight(),s=l*a,d=s+a;i<=s&&d<=n+i||(s<i?window.scrollTo(0,s):window.scrollTo(0,d-n))},o.updateOnResize=function(){window.requestAnimationFrame(function(){o.getAndUpdateTileLayout()})},o.handleTTI=function(){o.ttiReported=!0;var e=o.props.handleTTI;e&&e()},o.setLastViewedPage=function(e){var t=document.documentElement.scrollTop||document.body.scrollTop,r=Math.round(t/e);if(o.tileLoadLogger.pruneTrackedPages(),o.tileLoadLogger.logCompletedPages(),!o.tileLoadLogger.pagesCompletedLogging.has(r)&&!o.tileLoadLogger.pagesToLog.has(r))if(r!==o.tileLoadLogger.lastViewedPage){if(o.tileLoadLogger.lastViewedPage=r,o.tileLoadLogger.pageChangeTime=o.tileLoadLogger.getTimeNow(),!o.tileLoadLogger.startTimeByPage.get(r)){var i=o.tileLoadLogger.getTimeNow();o.tileLoadLogger.startTimeByPage.set(r,i)}}else{var i=o.tileLoadLogger.getTimeNow();i-o.tileLoadLogger.pageChangeTime>1e3&&o.tileLoadLogger.pagesToLog.add(r)}},o.logTileError=function(e){o.tileLoadLogger&&o.tileLoadLogger.recordTileError(e),o.props.logTileLoading&&c.InfiniteTileGridLogger.logThumbLoadError()},o.logTileLoaded=function(e,t,r){o.tileLoadLogger&&o.tileLoadLogger.recordTileLoaded(e,t,r)},o.renderTileElement=function(e,t,i){if(e<0||e>o.props.totalNumItems)return null;var l=o.props.getTileItem(e,i);if(!l)return r.default.createElement(d.TilePlaceholder,{leftOffset:t,tileHeight:o.state.tileWidth,tileWidth:o.state.tileWidth});var n,s=o.ttiReported&&o.props.delayRenderFullTile,c=l.isSelectable&&!!o.props.selectedIds&&o.props.selectedIds.has(l.id),u=l.file&&o.props.shouldFileBeHighlightedDropTarget(l.file,c),p=u&&l.file===o.props.activeDropTarget;l.fileSharedWithMe?n={type:l.fileSharedWithMe.type,icon:l.fileSharedWithMe.icon,fq_path:"/"+l.fileSharedWithMe.filename,thumbnail_url_tmpl:l.fileSharedWithMe.thumbnail_url_tmpl,name:l.fileSharedWithMe.filename}:l.file&&(n={type:l.file.type,icon:l.file.icon,fq_path:l.file.fq_path,thumbnail_url_tmpl:l.file.thumbnail_url_tmpl,name:a.filename(l.file.fq_path)});var f=0===e&&o.props.selectedIds&&0===o.props.selectedIds.size;return r.default.createElement(d.TileElement,{file:n,paper:l.paper,key:l.id,onTileAction:l.onTileAction,width:o.state.tileWidth,leftOffset:t,tileIndex:e,labelHeight:l.labelNode?o.props.labelHeight:0,delayRenderFullTile:s,actionNode:l.actionNode,thumbnailUrl:l.thumbnailUrl,labelNode:l.labelNode,altText:l.altText,onThumbnailError:o.props.logTileLoading?o.logTileError:void 0,onThumbnailLoad:o.props.logTileLoading?o.logTileLoaded:void 0,isDraggable:l.isDraggable,onDragEnter:l.onDragEnter,onDragStart:l.onDragStart,isFocused:l.isFocused,isSelectable:l.isSelectable,isSelected:c,isViewOnly:l.isViewOnly,isActiveDropTarget:p,isAvailableDropTarget:u,handleToggleSelect:l.handleToggleSelect,checkboxAriaText:l.checkboxAriaText,thumbStore:o.props.thumbStore,scrollTileIntoView:o.scrollTileIntoView,href:l.href,overrideTabIndex:f})},o.renderRow=function(e,t,i){var l=o.rowHeights?o.rowHeights[t]:o.getRowHeight();if(!e)return r.default.createElement(n.CulledItem,{className:o.props.rowClass,height:l,key:t,tagName:"div",topOffset:i});if(!Array.isArray(e))return r.default.createElement(n.CulledItem,{className:o.props.rowClass,height:l,key:t,tagName:"div",topOffset:i},e);for(var a=e,s=a[0],d=a[1],c=o.state.tileWidth+o.props.tilePadding,u=[],p=4,f=s;f<d;f++)u.push(o.renderTileElement(f,p,u.length)),p+=c;return r.default.createElement(n.CulledItem,{className:o.props.rowClass,height:l,key:t,tagName:"div",topOffset:i},u)},o.handleRangeInView=u(function(e,t){var r=o.props.onRangeInView;if(r&&0!==o.props.totalNumItems){var i=o.translateRowRangeToItemRange(e,t),l=i[0],n=i[1];isNaN(l)||isNaN(n)||r(l,n)}}),o.props.sectionLabels||o.props.sectionStartIndices){if(!o.props.sectionLabels||!o.props.sectionStartIndices)throw new Error("Included only one of `sectionLabels` or `sectionStartIndices`.");if(o.props.sectionLabels.length!==o.props.sectionStartIndices.length)throw new Error("sectionLabels and sectionStartIndices must be of same length.")}return o.state={tileWidth:o.props.maxTileWidth},s.JSStopwatch.create_stopwatch_if_not_exist("infinite_tile_grid_logging"),o}return o.__extends(t,e),t.prototype.updateLayout=function(){var e=this;this.animationFrameRequestId=window.requestAnimationFrame(function(){var t=e.getAndUpdateTileLayout();e.props.logTileLoading&&!e.tileLoadLogger&&e.setupTileLogging(e.getRowHeight(),t.tilesPerRow)})},t.prototype.componentDidMount=function(){window.addEventListener("resize",this.updateOnResize),this.updateLayout()},t.prototype.componentWillReceiveProps=function(e){this.tileLoadLogger&&this.tileLoadLogger.updateNumTiles(e.totalNumItems),this.props.maxTileWidth!==e.maxTileWidth&&this.updateLayout()},t.prototype.componentWillUnmount=function(){window.removeEventListener("resize",this.updateOnResize),this.animationFrameRequestId&&window.cancelAnimationFrame(this.animationFrameRequestId),this.tileLoadLogger&&(clearInterval(this.logTrackingInterval),delete this.tileLoadLogger)},t.prototype.getRowHeight=function(){var e=this.state.tileWidth+this.props.tilePadding;return this.props.showLabels&&(e+=this.props.labelHeight+4),e},t.prototype.getPageHeight=function(){var e=document.documentElement.clientHeight||window.outerHeight,t=this.props.contentOffset||0,o=e-t,r=this.getRowHeight(),i=r*Math.ceil(o/r);return Math.max(i,r)},t.prototype.getAndUpdateTileLayout=function(){var e=this.props.maxTileWidth+this.props.tilePadding,t=l.findDOMNode(this);if(!t||0===t.clientWidth)return{tileWidth:this.state.tileWidth,tilesPerRow:this.props.tilesPerRow};var o=t.clientWidth,r=Math.max(1,Math.floor(o/e)),i=this.props.maxTileWidth;return o%e>1&&(r++,i=o/r-this.props.tilePadding),this.state.tileWidth!==i&&this.setState({tileWidth:i}),this.props.tilesPerRow!==r&&this.props.onTilesPerRowChange(r),{tileWidth:i,tilesPerRow:r}},t.prototype.setupTileLogging=function(e,t){var o=this.getPageHeight(),r=t*Math.ceil(o/e);this.tileLoadLogger=new c.InfiniteTileGridLogger(this.props.totalNumItems,r,t,this.handleTTI),this.tileLoadLogger.pagesToLog.add(0);var i=this.tileLoadLogger.getTimeNow();this.tileLoadLogger.startTimeByPage.set(0,i),this.logTrackingInterval=setInterval(this.setLastViewedPage,200,o)},t.prototype.translateRowRangeToItemRange=function(e,t){var o=this.itemRangeByRow;return[o[e][0],o[t][1]]},t.prototype.render=function(){var e=this,t=this.itemRangeByRow;t.length=0;var o=[],i=this.getRowHeight(),l=this.props,a=l.containerClass,s=l.enableMaxHeightGrouping,d=l.numThresholdRows,c=l.scrollDeltaThreshold,u=l.sectionStartIndices,p=l.sectionLabels,f=l.totalNumItems;if(u&&u.length>0)return this.rowHeights=[],u.forEach(function(l,n){var a=f;n!==u.length-1&&(a=u[n+1]),e.rowHeights.push(32);var s=a-l,d=Math.ceil(s/e.props.tilesPerRow),c=p[n],m=r.default.createElement("div",{className:"tile-section-header",role:"heading","aria-level":2},c);o.push(m),t.push([l,l]);for(var h=0;h<d;h++){var _=l+h*e.props.tilesPerRow,g=Math.min(_+e.props.tilesPerRow,a),S=[_,g];o.push(S),t.push(S),e.rowHeights.push(i)}}),r.default.createElement(n.CulledList,{enableMaxHeightGrouping:s,items:o,listItemHeight:this.rowHeights,itemBuffer:d,className:a,renderRow:this.renderRow,scrollThreshold:c,shouldUseWindowAsScrollContainer:!0,onRangeInView:this.handleRangeInView,tagName:"div"});for(var m=Math.ceil(f/this.props.tilesPerRow),h=0;h<m;h++){var _=h*this.props.tilesPerRow,g=Math.min(_+this.props.tilesPerRow,f),S=[_,g];o.push(S),t.push(S)}return r.default.createElement(n.CulledList,{enableMaxHeightGrouping:s,items:o,listItemHeight:i,itemBuffer:d,className:a,renderRow:this.renderRow,scrollThreshold:c,shouldUseWindowAsScrollContainer:!0,onRangeInView:this.handleRangeInView,tagName:"div"})},t.defaultProps={enableMaxHeightGrouping:!1,numThresholdRows:10,tilePadding:16,tileHeight:160,maxTileWidth:160,labelHeight:40,logTileLoading:!1,scrollDeltaThreshold:1,showLabels:!0,getTileItem:function(e,t){return null},handleTTI:function(){}},t})(r.default.PureComponent);t.InfiniteTileGrid=f}),define("modules/clean/sharing/browse_exports",["require","exports","tslib","modules/core/browser","modules/clean/sharing/gating_util","modules/clean/sharing/async_share_modal_util","modules/clean/sharing/public_folder/public_folder","modules/clean/sharing/wizard/async_wizard_modals"],function(e,t,o,r,i,l,n,a){"use strict";function s(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];new Promise(function(t,o){e(["modules/clean/sharing/shared_content_link_mount_folder"],t,o)}).then(o.__importStar).then(function(e){e.mountSharedFolder.apply(void 0,t)})}function d(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return o.__awaiter(this,void 0,Promise,function(){return o.__generator(this,function(r){return[2,new Promise(function(r,i){new Promise(function(t,o){e(["modules/clean/sharing/ui_util"],t,o)}).then(o.__importStar).then(function(e){r(e.genContentManagerBridgeUri.apply(void 0,t))},i)})]})})}function c(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return o.__awaiter(this,void 0,Promise,function(){var t;return o.__generator(this,function(o){switch(o.label){case 0:return[4,d.apply(void 0,e)];case 1:return t=o.sent(),r.open_tab(t.toString()),[2]}})})}function u(t,r,i,l,n,a,s,d){new Promise(function(t,o){e(["modules/clean/sharing/cdm_new_folder_modal"],t,o)}).then(o.__importStar).then(function(e){e.showCdmNewFolderModal(t,r,i,l,n,a,s,d)})}function p(t){return o.__awaiter(this,void 0,void 0,function(){var r;return o.__generator(this,function(i){switch(i.label){case 0:return[4,new Promise(function(t,o){e(["modules/clean/sharing/cdm_new_folder_modal_util"],t,o)}).then(o.__importStar)];case 1:return r=i.sent(),r.showAppropriateNewFolderModalForCdmUser(t),[2]}})})}Object.defineProperty(t,"__esModule",{value:!0}),r=o.__importStar(r),t.asyncMountSharedFolder=s,t.asyncGoToContentManagerForPath=c,t.asyncShowCdmNewFolderModal=u,t.asyncShowAppropriateNewFolderModalForCdmUser=p,t.GoldenGate=i.GoldenGate,t.asyncShowShareModal=l.asyncShowShareModal,t.asyncShowNewFolderShareModal=l.asyncShowNewFolderShareModal,t.asyncShowPrefilledShareModal=l.asyncShowPrefilledShareModal,t.expAsyncShowShareInterstitialModal=l.expAsyncShowShareInterstitialModal,t.makePublicFolderLink=n.makePublicFolderLink,t.shouldUsePublicFolderSharing=n.shouldUsePublicFolderSharing,t.showPublicFolderLinkModal=n.showPublicFolderLinkModal,t.asyncShowShareAFolderWizardModal=a.asyncShowShareAFolderWizardModal});
//# sourceMappingURL=pkg-files-view-extra.min.js-vflUTOtZD.map