define(["require","exports","tslib","react","modules/core/i18n","modules/clean/react/css","modules/clean/components/loading_indicator","modules/clean/react/file_activity_stream/tti_logger","modules/clean/react/file_sidebar/file_sidebar_connect","modules/clean/react/file_sidebar/store/file_activity/actions","modules/clean/react/file_sidebar/store/file_activity/selectors","modules/clean/react/file_activity_stream/file_activity_stream_card_factory","modules/clean/react/file_activity_stream/thirdparty_activity_onboarding_logic"],function(e,t,i,r,a,l,n,c,s,o,d,u,_){"use strict";function f(e){var t=d.getActivitiesMetadata(e);return{activities:i.__assign({},t)}}Object.defineProperty(t,"__esModule",{value:!0}),r=i.__importDefault(r),o=i.__importStar(o),d=i.__importStar(d);var m=(function(e){function t(t){var i=e.call(this,t)||this;return i.onRefreshClick=function(e){var t=i.props,r=t.dispatch,a=t.file,l=t.user;e.preventDefault(),r(o.reset()),r(o.getActivityStream(l.id,a))},i.state={},i}return i.__extends(t,e),t.prototype.renderDebug=function(){return null},t.prototype.renderLoading=function(){return r.default.createElement("div",{className:"file_activity_stream file_activity_stream-overlay"},r.default.createElement(n.LoadingIndicator,{style:n.LoadingIndicator.LoadingIndicatorStyle.BLUE_SPINNER}))},t.prototype.renderError=function(){return r.default.createElement("div",{className:"file_activity_stream file_activity_stream-overlay"},r.default.createElement("div",{className:"file_activity_stream__centered_panel"},a._("Oops, we had an issue."),r.default.createElement("a",{href:"",onClick:this.onRefreshClick},a._("Try again"))))},t.prototype.renderNoLogs=function(){return r.default.createElement("div",{className:"file_activity_stream"},r.default.createElement("div",{className:"file_activity_stream__empty_state"},r.default.createElement("h4",null,a._("No recent activity")),r.default.createElement("p",null,a._("Once people start doing things with this file, you’ll see their activity here."))))},t.prototype.renderOldFile=function(){return r.default.createElement("div",{className:"file_activity_stream"},r.default.createElement("div",{className:"file_activity_stream__empty_state"},r.default.createElement("h4",null,a._("No recent activity")),r.default.createElement("p",null,a._("This file hasn’t been updated in the past year."))))},t.prototype.render=function(){var e=this.props,t=e.activities,i=e.file,a=e.user;if(!t)return null;if(!t.loaded&&t.loading)return this.renderLoading();if(0===t.value.length)return t.error?this.renderError():"number"==typeof i.ts&&Math.floor(Date.now()/1e3)-i.ts>=7776e3?this.renderOldFile():this.renderNoLogs();var l=r.default.createElement("div",{className:"file_activity_stream"},r.default.createElement(_.ThirdpartyActivityOnboardingComponent,{activities:this.props.activities.value,user:this.props.user}),t.value.map(function(e){return r.default.createElement(u.FileActivityStreamCardFactory,{key:e.id,activity:e,file:i,viewingUser:a})}),this.renderDebug());return c.faStreamTTILogger.recordInteractive(i.file_id),l},t})(r.default.Component);t.FileActivityStreamComponent=m,t.FileActivityStream=s.fileSidebarConnect(f)(l.requireCssWithComponent(m,["/static/css/file_activity_stream-vflDnObwq.css"]))});
//# sourceMappingURL=file_activity_stream.min.js-vflCr15S0.map