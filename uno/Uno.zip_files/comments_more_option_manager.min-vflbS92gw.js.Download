define(["require","exports","tslib","react","external/react-redux","modules/clean/react/file_viewer/more_dropdown/more_option_registry","modules/clean/react/file_action_button","modules/clean/react/file_viewer/more_dropdown/models","modules/clean/react/comments2/data/actions","modules/clean/react/comments2/data/selectors"],function(e,t,o,n,i,r,s,p,u,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n=o.__importDefault(n),c=o.__importStar(c);var l=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.toggleShowResolved=function(){var e=t.props,o=e.dispatch,n=e.showResolved,i=n?"hide_resolved_threads":"show_resolved_threads";o(u.Actions.toggleShowResolved()),o(u.Actions.logEvent(i))},t.setCommentsEnabled=function(){t.props.dispatch(u.Actions.enableCommenting())},t.setCommentsDisabled=function(){t.props.dispatch(u.Actions.disableCommenting())},t}return o.__extends(t,e),t.prototype.buildResolveOption=function(){var e=this.props.showResolved?s.FileActionButtonType.HIDE_RESOLVED_COMMENTS:s.FileActionButtonType.SHOW_RESOLVED_COMMENTS;return new p.MoreOption({className:"comments-options-item__show-resolved",fileActionButtonType:e,component:function(e){return n.default.createElement("span",null,e.buttonText)},handler:this.toggleShowResolved})},t.prototype.buildEnableOption=function(){var e,t;return this.props.isEnabled?(e=s.FileActionButtonType.DISABLE_COMMENTS,t=this.setCommentsDisabled):(e=s.FileActionButtonType.ENABLE_COMMENTS,t=this.setCommentsEnabled),new p.MoreOption({className:"comments-options-item__disable",fileActionButtonType:e,component:function(e){return n.default.createElement("span",null,e.buttonText)},handler:t})},t.prototype.buildSubscribeOption=function(){var e,t,o=this;return this.props.isSubscribed?(e=s.FileActionButtonType.UNSUBSCRIBE,t=function(){return o.props.dispatch(u.Actions.unsubscribe(void 0))}):(e=s.FileActionButtonType.SUBSCRIBE,t=function(){return o.props.dispatch(u.Actions.subscribe(void 0))}),new p.MoreOption({className:"comments-options-item__subscribe",fileActionButtonType:e,component:function(e){return n.default.createElement("span",null,e.buttonText)},handler:t})},t.prototype.updateCommentsMoreOptionGroup=function(){var e=[],t=this.props,o=t.canEnable,n=t.canSubscribe;o&&e.push(this.buildEnableOption()),e.push(this.buildResolveOption()),n&&e.push(this.buildSubscribeOption());var i=new p.MoreOptionGroup({fileActionButtonGroup:s.FileActionButtonGroup.COMMENTS,options:e});void 0===this.moreOptionGroup?r.moreOptionRegistry.addOption(i):r.moreOptionRegistry.replaceOption(this.moreOptionGroup,i),this.moreOptionGroup=i},t.prototype.componentDidMount=function(){this.updateCommentsMoreOptionGroup()},t.prototype.componentDidUpdate=function(){this.updateCommentsMoreOptionGroup()},t.prototype.componentWillUnmount=function(){this.moreOptionGroup&&r.moreOptionRegistry.removeOption(this.moreOptionGroup)},t.prototype.render=function(){return null},t})(n.default.PureComponent);t.UnconnectedCommentsMoreOptionManager=l,t.CommentsMoreOptionManager=i.connect(function(e){return{showResolved:c.getShowResolved(e),canEnable:c.getCanEnable(e),isEnabled:c.getIsEnabled(e),canSubscribe:c.getCanSubscribe(e),isSubscribed:c.getIsSubscribed(e)}})(l)});
//# sourceMappingURL=comments_more_option_manager.min.js-vfl9jvw8i.map