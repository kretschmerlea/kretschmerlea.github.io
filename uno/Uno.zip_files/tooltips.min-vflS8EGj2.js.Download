define(["require","exports","tslib","react","spectrum/button","spectrum/tertiary_link","spectrum_comments/utils/throttle-debounce","modules/clean/react/callout_orchestrator","modules/clean/react/comments2/components/tooltip","modules/clean/sharing/views/hover_close_button","modules/constants/trademark","modules/core/browser","modules/core/i18n"],function(e,t,o,n,i,r,l,s,a,c,u,d,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n=o.__importDefault(n),c=o.__importDefault(c),d=o.__importStar(d);var m=function(e){return n.default.createElement("div",null,n.default.createElement("div",{className:"arrow-border"}),n.default.createElement("div",{className:"arrow"}),e)},f=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.setRef=function(e){t.tooltipRef=e},t}return o.__extends(t,e),t.prototype.render=function(){var e=this.props,t=e.content,o=e.children,i=e.onShow;return n.default.createElement(s.CalloutOrchestrator,{type:s.CalloutType.Comments},n.default.createElement(a.Tooltip,{tooltip_classname:"sc-comment-editor-tooltip-container",tooltip_contents:m(t),position:a.TooltipPosition.BOTTOM,on_show:i,show_delay:500,hide_delay:100,ref:this.setRef,interaction_enabled:!0},o))},t})(n.default.PureComponent),h=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.setRef=function(e){t.tooltipRef=e},t.updateAndShow=l.debounce(function(){t.tooltipRef&&(t.tooltipRef.hide(),t.tooltipRef.show())},300),t.scheduleShowAfterTransition=function(e){"left"===e.propertyName&&t.updateAndShow()},t}return o.__extends(t,e),t.prototype.componentDidMount=function(){document.addEventListener("transitionend",this.scheduleShowAfterTransition),this.updateAndShow()},t.prototype.componentDidUpdate=function(){this.updateAndShow()},t.prototype.componentWillUnmount=function(){document.removeEventListener("transitionend",this.scheduleShowAfterTransition)},t.prototype.render=function(){var e=this.props,t=e.content,o=e.children,i=e.onShow;return n.default.createElement(a.Tooltip,{tooltip_classname:"sc-comment-editor-tooltip-container",tooltip_contents:m(t),position:a.TooltipPosition.BOTTOM,on_show:i,ref:this.setRef,disableAutoHide:!0},o)},t})(n.default.PureComponent);t.DisabledTimeCodeTooltip=function(e){var t=function(){e.onClick&&e.onClick(),d.open_tab("/help/files-folders/comment-timestamp")},o=n.default.createElement("div",{className:"sc-comment-editor-tooltip"},p._("This file is not on a plan that includes time-based commenting.")," ",n.default.createElement(r.TertiaryLink,{onClick:t},p._("Learn more")));return n.default.createElement(f,{content:o,onShow:e.onShow},e.children)};var _=p._("Leave time-based comments with %(dropbox_professional)s.").format({dropbox_professional:u.DROPBOX_PROFESSIONAL}),b=p._("Try free for 30 days"),v=p._("Leave time-based comments with %(dropbox_business_advanced)s.").format({dropbox_business_advanced:u.DROPBOX_BUSINESS_ADVANCED}),y=function(e,t,o){return{bodyText:e,buttonText:t,url:o}},T={basic_individual:y(_,b,"/pro/try?_tk=upgrade_header_button"),plus_individual:y(_,p._("Learn more"),"/buy/professional?_tk=upgrade_header_button"),standard_team_admin:y(v,b,"/business/try"),standard_team_member:y(v,p._("Contact your admin"),"/teams")},E=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ref=null,t.onClick=function(){var e=t.props,o=e.onClick,n=e.variant;if(t.hideTooltip(),o&&o(),n){var i=T[n];d.open_tab(i.url)}},t.onDismiss=function(){var e=t.props.onDismiss;t.hideTooltip(),e&&e()},t.setRef=function(e){t.ref=e},t}return o.__extends(t,e),t.prototype.hideTooltip=function(){this.ref&&this.ref.tooltipRef&&this.ref.tooltipRef.hide()},t.prototype.componentWillMount=function(){this.hideTooltip()},t.prototype.render=function(){var e=this.props,t=e.variant,o=e.children,r=e.showUpsellExperiment,l=e.dismissUpsellExperiment,a=e.onShow,u=T[t],d=u.bodyText,m=u.buttonText,_=r?h:f,b=n.default.createElement("div",{className:"sc-comment-editor-tooltip"},n.default.createElement("div",{className:"sc-comment-editor-tooltip__header"},n.default.createElement(c.default,{className:"sc-comment-editor-tooltip__x",onClick:this.onDismiss}),n.default.createElement("h4",null,p._("Target your feedback"))),n.default.createElement("div",null,d),n.default.createElement(i.Button,{className:"sc-comment-editor-tooltip__button",onClick:this.onClick,fullWidth:!0},m));return n.default.createElement(s.CalloutOrchestrator,{type:s.CalloutType.Comments},n.default.createElement(_,{content:b,onShow:a,dismissUpsellExperiment:l,ref:this.setRef},o))},t})(n.default.PureComponent);t.UpsellTooltip=E});
//# sourceMappingURL=tooltips.min.js-vfl2UK9tG.map