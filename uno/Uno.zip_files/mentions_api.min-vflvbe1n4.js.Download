define(["require","exports","tslib","external/lodash","modules/clean/contacts/bloodhound_contacts_v2","modules/clean/contacts/data_v2","modules/clean/react/comments2/transforms"],function(t,e,n,a,c,o,i){"use strict";function r(t,e){return t?new s(t,e):{cache:{},query:function(){},getMatchesWithStarterSuggestions:function(){return{}}}}Object.defineProperty(e,"__esModule",{value:!0}),a=n.__importStar(a);var s=(function(){function t(t,e){void 0===e&&(e=!1);var a=this;this.cache={},this.filterContact=function(t){var e=!!t.group_id,n=!a.allowMentionSelf&&t.email===a.user.email;return!(e||n)},this.updateCache=function(t,e){var c;return a.cache=n.__assign({},a.cache,(c={},c[t]=e.map(i.contactToIMentionUser),c)),a.cache},this.user=t,this.allowMentionSelf=e,this.dataSource=new o.ContactsDataSourceV2(t,this.filterContact)}return t.prototype.query=function(t,e,n){var a=this;this.dataSource.search(t,function(n){e(a.updateCache(t,n))},function(c){(n||e)(a.updateCache(t,c))})},t.prototype.getMatchesWithStarterSuggestions=function(){var t=c.BloodhoundContactsV2.getAll(this.user).filter(this.filterContact).map(i.contactToIMentionUser),e=a.sortBy(t.slice(0,50),function(t){return t.name||t.email});return this.cache=n.__assign({},this.cache,{"":e}),this.cache},t})();e.MentionsApiImpl=s,e.mentionsApi=r});
//# sourceMappingURL=mentions_api.min.js-vfltDurId.map