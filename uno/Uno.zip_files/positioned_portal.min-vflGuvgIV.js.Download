define(["require","exports","tslib","react","deep-integrations/facepile/positioned_portal/utils","spectrum/portal"],function(t,e,n,o,s,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),o=n.__importStar(o);var r=(function(t){function e(e){var n=t.call(this,e)||this;return n.handleMouseOver=n.handleMouseOver.bind(n),n.handleMouseOut=n.handleMouseOut.bind(n),n.handleMouseInContent=n.handleMouseInContent.bind(n),n.handleMouseOutContent=n.handleMouseOutContent.bind(n),n.handleOnFocus=n.handleOnFocus.bind(n),n.handleOnBlur=n.handleOnBlur.bind(n),n.handleClick=n.handleClick.bind(n),n.closePortal=n.closePortal.bind(n),n.handleKeyEvent=n.handleKeyEvent.bind(n),n.handleScrollEvent=n.handleScrollEvent.bind(n),n.state={isShown:!!e.isShowInitially},n}return n.__extends(e,t),e.prototype.componentDidMount=function(){var t=this;this.state.isShown&&this.portalInstance.mountPortal(function(){t.resolvePortalPosition()})},e.prototype.componentDidUpdate=function(){var t=this;this.state.isShown&&this.portalInstance?(this.mountListeners(),this.props.onWillShow&&this.props.onWillShow(),this.portalInstance.mountPortal(function(){t.props.onDidShow&&t.props.onDidShow(),t.resolvePortalPosition()})):this.portalInstance&&(this.unMountListeners(),this.props.onWillClose&&this.props.onWillClose(),this.portalInstance.unMountPortal(),this.wrapperElementRef=null)},e.prototype.componentWillUnmount=function(){this.portalInstance&&this.portalInstance.unMountPortal()},e.prototype.mountListeners=function(){document.addEventListener("keydown",this.handleKeyEvent,!1),document.addEventListener("scroll",this.handleScrollEvent,!1)},e.prototype.unMountListeners=function(){document.removeEventListener("keydown",this.handleKeyEvent,!1),document.removeEventListener("scroll",this.handleScrollEvent,!1)},e.prototype.handleOnFocus=function(t){!this.props.showOnClick&&this.showPortal()},e.prototype.handleOnBlur=function(t){this.props.closeOnBlur&&this.closePortal()},e.prototype.handleMouseOver=function(t){this.props.showOnMouseMove&&this.showPortal()},e.prototype.handleMouseOut=function(t){this.props.showOnMouseMove&&this.hidePortal()},e.prototype.handleMouseInContent=function(t){this.props.showOnMouseInContent&&this.showPortal()},e.prototype.handleMouseOutContent=function(t){this.props.showOnMouseInContent&&this.hidePortal()},e.prototype.handleClick=function(t){this.props.showOnClick&&this.showPortal()},e.prototype.handleKeyEvent=function(t){27===t.keyCode&&this.closePortal()},e.prototype.handleScrollEvent=function(){this.state.isShown&&this.resolvePortalPosition()},e.prototype.closePortal=function(){this.hidePortalImmediate(),this.props.onDidClose&&this.props.onDidClose()},e.prototype.showPortal=function(){this._cancelPendingDismiss(),this.state.isShown||this.setState({isShown:!0})},e.prototype.hidePortal=function(){var t=this;this.state.isShown&&(this._cancelPendingDismiss(),this._pendingDismiss=window.setTimeout(function(){t.hidePortalImmediate()},this.props.delayBeforeDismissing||0))},e.prototype.hidePortalImmediate=function(){this.setState({isShown:!1})},e.prototype._cancelPendingDismiss=function(){this._pendingDismiss&&clearTimeout(this._pendingDismiss)},e.prototype.resolvePortalPosition=function(){if(this.portalInstance&&this.wrapperElementRef&&this.portalInstance.portalContentElementRef){var t=this.wrapperElementRef.childElementCount<2&&this.wrapperElementRef.firstElementChild||this.wrapperElementRef,e=s.calculatePosition(t,this.portalInstance.portalContentElementRef,this.props.positioning||"above",this.props.positionOffset);this.portalInstance.portalContentElementRef.style.top=e.top+"px",this.portalInstance.portalContentElementRef.style.left=e.left+"px"}},e.prototype.render=function(){var t=this;return o.createElement("div",{"aria-describedby":this.props.id,onMouseOver:this.handleMouseOver,onMouseLeave:this.handleMouseOut,onFocusCapture:this.handleOnFocus,onBlur:this.handleOnBlur,onClick:this.handleClick,className:this.props.wrapperClassName?this.props.wrapperClassName:"int-positioned-portal-wrapper",ref:function(e){return t.wrapperElementRef=e}},o.createElement(i.Portal,{ref:function(e){return t.portalInstance=e},className:"int-positioned-portal-content",parentElement:this.props.portalParentElement},o.createElement("div",{onMouseEnter:this.handleMouseInContent,onMouseLeave:this.handleMouseOutContent,onFocusCapture:this.handleOnFocus,onBlur:this.handleOnBlur},this.props.renderContent&&this.props.renderContent()||null)),this.props.children)},e})(o.Component);e.PositionedPortal=r});
//# sourceMappingURL=positioned_portal.min.js-vflYKQ4n3.map